(()=>{var e=window.location.href,t=window.location.hash;document.addEventListener("DOMContentLoaded",(()=>{t&&sessionStorage.getItem("MyToken")?"#VM"==t?s():(t=t.replace("#access_token=","").split("&")[0],sessionStorage.setItem("MyToken",t),o()):function(){var t="https://login.microsoftonline.com/common/oauth2/authorize",o=document.createElement("form");o.setAttribute("method","GET"),o.setAttribute("action",t);var n={client_id:"457a5491-f470-4c0c-beae-efa300de112b",redirect_uri:e,response_type:"token",resource:"https://management.core.windows.net"};for(var a in n){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",a),s.setAttribute("value",n[a]),o.appendChild(s)}document.body.appendChild(o),o.submit()}()}));let o=e=>{let t=sessionStorage.getItem("MyToken"),o=new Headers;o.append("Authorization","Bearer ".concat(t));let n=new Request("https://management.azure.com/subscriptions?api-version=2022-12-01",{method:"GET",mode:"cors",headers:o});!function(){let e;fetch(n).then((e=>e.json())).then((t=>{console.log(t),e=t.value[0].id,sessionStorage.setItem("subID",e)})).catch((e=>{console.error(e.message)})),new Promise((t=>{setTimeout((()=>{t(e)}),2e3)}))}()};var n;if(sessionStorage.getItem("subID")){var a=document.getElementById("app-navigation-vue");(n=document.createElement("button")).setAttribute("class","app-navigation-button");const e=document.createTextNode("Virtual Machines");n.appendChild(e),a.appendChild(n)}n.addEventListener("click",(()=>{window.location.hash="#VM",location.reload()}));let s=e=>{const t=sessionStorage.getItem("subID");let o,n="https://management.azure.com".concat(t,"/providers/Microsoft.Compute/virtualMachines?api-version=2023-07-01"),a=sessionStorage.getItem("MyToken"),s=new Headers;s.append("Authorization","Bearer ".concat(a));let r=new Request(n,{method:"GET",mode:"cors",headers:s});async function i(){return fetch(r).then((e=>e.json())).then((e=>{console.log(e),o=e})).catch((e=>{console.log("Error message:"),console.error(e.message)})),new Promise((e=>{setTimeout((()=>{e(o)}),2e3)}))}!async function(){const e=await i();for(let t=0;t<e.value.length;t++){console.log(e.value[t].name);const o=document.createElement("div"),n=document.createTextNode(e.value[t].name);o.appendChild(n),document.body.insertBefore(o,document.getElementById("vm-footer"))}}()}})();
//# sourceMappingURL=azure-azureScript.js.map